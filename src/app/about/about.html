<nav class="navbar custom-nav px-4">
  <span class="navbar-brand mb-0 h1 text-white">
    <i class="fa-solid fa-table-columns me-2"></i> Kanban
  </span>
  <button type="button" class="btn btn-light btn-sm rounded-3 add-btn" data-bs-toggle="modal"
    data-bs-target="#createTaskModal">
    <i class="fa-solid fa-plus"></i>
  </button>


  <div class="modal fade" id="createTaskModal" tabindex="-1" aria-labelledby="createTaskModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content custom-modal">

        <div class="modal-header border-0 pb-0">
          <h5 class="modal-title fw-bold" id="createTaskModalLabel">Create New Task</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>

        <div class="modal-body pt-4">
          <form>
            <div class="mb-3">
              <label class="form-label small fw-bold text-muted">
                <i class="fa-solid fa-heading me-1 text-secondary"></i> Task Title <span class="text-danger">*</span>
              </label>
              <input type="text" [(ngModel)]="title" name="title" class="form-control custom-input"
                placeholder="What needs to be done?">
            </div>

            <div class="row mb-3">
              <div class="col-6">
                <label class="form-label small fw-bold text-muted">
                  <i class="fa-solid fa-flag me-1 text-secondary"></i> Priority
                </label>
                <select class="form-select custom-input" [(ngModel)]="priority" name="priority">
                  <option selected>Medium</option>
                  <option>High</option>
                  <option>Low</option>
                </select>
              </div>
              <div class="col-6">
                <label class="form-label small fw-bold text-muted">
                  <i class="fa-solid fa-calendar-days me-1 text-secondary"></i> Due Date
                </label>
                <input type="date" class="form-control custom-input" [(ngModel)]="createdAt" name="createdAt">
              </div>
            </div>

            <div class="mb-1">
              <label class="form-label small fw-bold text-muted">
                <i class="fa-solid fa-bars-staggered me-1 text-secondary"></i> Description
              </label>
              <textarea class="form-control custom-input" rows="4" placeholder="Add more details about this task..."
                [(ngModel)]="description" name="description"></textarea>
            </div>
            <div class="text-end mb-4">
              <small class="text-muted">0/500</small>
            </div>

            <div class="d-flex gap-3">
              <button type="button" class="btn btn-cancel flex-grow-1 py-2" data-bs-dismiss="modal">Cancel</button>
              <button type="submit" (click)="onSubmit()" class="btn btn-add flex-grow-1 py-2 fw-bold">
                <i class="fa-solid fa-plus me-1"></i> Add Task
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</nav>
<div class="container-fluid py-4 bg-light min-vh-100 main">
  <div class="row g-4">

    <div class="col-md-4">
      <div class="kanban-column p-3">
        <div class="d-flex align-items-center mb-3">
          <div class="icon-box todo-icon me-2"><i class="fa-solid fa-clipboard-list"></i></div>
          <div>
            <h6 class="mb-0 fw-bold">To Do</h6>
            <small class="text-muted">{{count("todo")}} tasks</small>
          </div>
        </div>
        @for (item of taskList; track $index){
        @if (item.status=="todo") {
        <div class="task-card mb-3">
          <small class="text-muted">#00{{$index}}</small>
          <h5 class="fw-bold mt-1">{{ item.title}}</h5>
          <p class="text-muted small mb-2">{{ item.description}}</p>
          <span  [class]="{
            'badge-priority': item.priority==='high',
            'badge-medium-priority': item.priority==='medium',
            'badge-low-priority': item.priority==='low'
          }" class="badge badge-priority mb-3">● {{ item.priority.toUpperCase()}}</span>
          <div class="d-flex text-muted small mb-3">
            <span class="me-3"><i class="fa-regular fa-calendar me-1"></i> {{ item.createdAt}}</span>
            <span><i class="fa-regular fa-clock me-1"></i> {{ item.dueDate}}</span>
          </div>
          <div class="d-flex gap-2">
            <button class="btn btn-start flex-grow-1" (click)="change($index,'inprogress')"><i
                class="fa-solid fa-play me-1"></i> Start</button>
            <button class="btn btn-complete flex-grow-1" (click)="change($index,'done')"><i
                class="fa-solid fa-check me-1"></i> Complete</button>
          </div>
        </div>
        }
        }


        @empty {
        <div class="empty-state text-center py-5">
          <i class="fa-solid fa-folder-open mb-2"></i>
          <p class="mb-0">No tasks yet</p>
          <small class="text-muted">Click + to add one</small>
        </div>
        }
      </div>
    </div>

    <div class="col-md-4">
      <div class="kanban-column p-3">
        <div class="d-flex align-items-center mb-3">
          <div class="icon-box progress-icon me-2"><i class="fa-solid fa-spinner"></i></div>
          <div>
            <h6 class="mb-0 fw-bold">In Progress</h6>
            <small class="text-muted">{{count("inprogress")}} tasks</small>
          </div>
        </div>
        @for (item of taskList; track $index){
        @if (item.status=="inprogress") {
        <div class="task-card mb-3">
          <small class="text-muted">#00{{$index}}</small>
          <h5 class="fw-bold mt-1">{{ item.title}}</h5>
          <p class="text-muted small mb-2">{{ item.description}}</p>
          <span class="badge badge-priority mb-3" [class]="{
            'badge-priority': item.priority=='high',
            'badge-medium-priority': item.priority=='medium',
            'badge-low-priority': item.priority=='low'
          }">● {{ item.priority.toUpperCase()}}</span>
          <div class="d-flex text-muted small mb-3">
            <span class="me-3"><i class="fa-regular fa-calendar me-1"></i> {{ item.createdAt}}</span>
            <span><i class="fa-regular fa-clock me-1"></i> {{ item.dueDate}}</span>
          </div>
          <div class="d-flex gap-2">
            <button (click)="change($index,'todo')"
              class="btn  flex-grow-1 bg-slate-100 text-slate-600 hover:bg-slate-200 hover:text-slate-700">
              <i class="fa-solid fa-arrow-rotate-left pointer-events-none"></i> <span class="pointer-events-none">To
                Do</span>
            </button>
            <button class="btn btn-complete flex-grow-1" (click)="change($index,'done')"><i
                class="fa-solid fa-check me-1"></i> Complete</button>
          </div>
        </div>
        }
        }


        @empty {
        <div class="empty-state text-center py-5">
          <i class="fa-solid fa-folder-open mb-2"></i>
          <p class="mb-0">No tasks yet</p>
          <small class="text-muted">Click + to add one</small>
        </div>
        }
      </div>
    </div>

    <div class="col-md-4">
      <div class="kanban-column p-3">
        <div class="d-flex align-items-center mb-3">
          <div class="icon-box done-icon me-2"><i class="fa-solid fa-circle-check"></i></div>
          <div>
            <h6 class="mb-0 fw-bold">Completed</h6>
            <small class="text-muted">{{count("done")}} tasks</small>
          </div>
        </div>
        @for (item of taskList; track $index){
        @if (item.status=="done") {
        <div class="task-card mb-3">

          <h5 class="fw-bold mt-1">{{ item.title}}</h5>
          <p class="text-muted small mb-2">{{ item.description}}</p>
          <span class="badge badge-priority badge-priority mb-3" [class]="{
            'badge-priority': item.priority=='high',
            'badge-medium-priority': item.priority=='medium',
            'badge-low-priority': item.priority=='low'
          }">● {{ item.priority.toUpperCase()}}</span>
          <div class="d-flex text-muted small mb-3">
            <span class="me-3"><i class="fa-regular fa-calendar me-1"></i> {{ item.createdAt}}</span>
            <span><i class="fa-regular fa-clock me-1"></i> {{ item.dueDate}}</span>
          </div>
          <div class="d-flex gap-2">
            <button (click)="change($index,'todo')"
              class="btn  flex-grow-1 bg-slate-100 text-slate-600 hover:bg-slate-200 hover:text-slate-700">
              <i class="fa-solid fa-arrow-rotate-left pointer-events-none"></i> <span class="pointer-events-none">To
                Do</span>
            </button>
            <button class="btn btn-start flex-grow-1" (click)="change($index,'inprogress')"><i
                class="fa-solid fa-play me-1"></i> start</button>

          </div>
        </div>
        }
        }


        @empty {
        <div class="empty-state text-center py-5">
          <i class="fa-solid fa-folder-open mb-2"></i>
          <p class="mb-0">No tasks yet</p>
          <small class="text-muted">Click + to add one</small>
        </div>
        }
      </div>
    </div>

  </div>
</div>
<!-- <div class="container bg-danger-subtle my-4 py-3" id="about-us">
  <div class="inner">
    <h1>About Us</h1>
    <p>Welcome to our application! We are dedicated to providing the best service possible.</p>
    <p>Our team is passionate about creating innovative solutions that meet the needs of our users.</p>
    <p>Feel free to explore and learn more about what we have to offer.</p>
    <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Labore, quia rerum! Unde aliquid suscipit saepe maiores exercitationem omnis soluta fugiat maxime laboriosam eaque pariatur consectetur voluptatibus sed labore vel animi at, ipsa assumenda voluptates repudiandae tempora esse! Eos eum saepe consectetur cupiditate distinctio officiis fugit, deserunt itaque magnam minus consequuntur.</p>
    <p>Lorem ipsum, dolor sit amet consectetur adipisicing elit. Quasi beatae magni praesentium dolores. Esse est distinctio, harum placeat laudantium sapiente repellendus, eos in enim quasi voluptatum quae facilis nostrum dolorem, ea ab hic! Quod, ipsum similique incidunt aspernatur nihil ratione itaque sunt labore illum exercitationem deserunt rem. Placeat odit, tenetur, ducimus nemo facilis odio iste dicta ipsum amet eum minus provident esse vitae totam quo commodi? Ullam perspiciatis quae officiis ipsum aliquam nostrum, quod assumenda, a sed laboriosam architecto in quisquam modi explicabo deleniti hic reiciendis fuga corrupti suscipit consequuntur, iure odit harum sequi tempora. Amet nulla earum ut illum?</p>
  </div>
</div> -->
